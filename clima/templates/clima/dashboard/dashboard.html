{% extends "base.html" %}

{% block page_title %}Dashboard{% endblock %}

{% block content %}
    <div class="container dashboard-content">
        <h1>Dashboard</h1>
        <p>Bem-vindo ao painel de controle!</p>

        <div class="row">
            <!-- Card para a quantidade de Sensores -->
            <div class="col-md-6">
                <div class="card text-white bg-primary mb-3">
                    <div class="card-header">Quantidade de Sensores</div>
                    <div class="card-body">
                        <h5 class="card-title">{{ total_sensores }}</h5>
                        <p class="card-text">Sensores cadastrados no sistema.</p>
                    </div>
                </div>
            </div>

            <!-- Card para a quantidade de Salas -->
            <div class="col-md-6">
                <div class="card text-white bg-secondary mb-3">
                    <div class="card-header">Quantidade de Salas</div>
                    <div class="card-body">
                        <h5 class="card-title">{{ total_salas }}</h5>
                        <p class="card-text">Salas cadastradas no sistema.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Gráfico de Temperatura -->
    <div class="container mt-4">
        <h2>Gráfico de Temperatura</h2>

        <!-- Definindo um tamanho fixo para o gráfico -->
        <canvas id="graficoTemperatura" style="width: 100px; height: 100px;"></canvas> <!-- Quadrado de 300x300px -->

        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script>
            // Dados de Temperatura
            var labels = {{ labels|safe }};  // Labels dos dados de temperatura
            var valores = {{ valores|safe }};  // Valores das medições de temperatura

            // Gráfico de Temperatura usando Chart.js
            var ctx = document.getElementById('graficoTemperatura').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,  // Labels (data)
                    datasets: [{
                        label: 'Temperatura (°C)',
                        data: valores,  // Valores das temperaturas
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,  // Garantindo que o gráfico se mantenha proporcional
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Data'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Temperatura (°C)'
                            }
                        }
                    }
                }
            });
        </script>
    </div>
{% endblock %}
